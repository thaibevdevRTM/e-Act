@using eActForm.Models
@model eActForm.Models.Activity_Model.actForms

<div class="row">

	<div class="col-md-12 col-xs-12">

	</div>
	<div class="col-md-12 col-xs-12">
		<a class="btn ink-reaction btn-info fa fa-search" href="#"></a>คือ View
		<a class="btn ink-reaction btn-success fa fa-thumbs-o-up" href="#"></a>คือ Approve

		<table id="datatable" class="table table-striped table-hover">
			<thead>
				<tr style="background-color:#2B5D95;color:#ffffff;">
					<th></th>
					<th>Status</th>
					<th>Doc.Date</th>
					<th>Act.No</th>
					<th>วัตถุประสงค์</th>
					<th align="center">ยอดขายช่วงกิจกรรม</th>
					<th align="center">ค่าใช้จ่าย</th>
					<th align="center">% ต่อยอดขาย</th>
				</tr>
			</thead>
			<tbody>
				@foreach (var item in Model.actLists)
				{
				<tr class="gradeX">
					<td>
						@Html.ActionLink(" ", "getPDF", "ActivityViewer", new { actId = item.id }, new { @class = "btn ink-reaction btn-info fa fa-search", target = "_blank" })

						@Html.ActionLink(" ", "index", "approve", new { actId = item.id,type=AppCode.ApproveType.Activity_Form }, new { @class = "btn ink-reaction btn-success fa fa-thumbs-o-up" })
					</td>
					<td>@item.statusName</td>
					<td>@{var date = item.documentDate == null ? "" : item.documentDate.Value.ToString("dd/MM/yyyy");} @date </td>
					<td>@item.activityNo</td>
					<td>@item.objective</td>
					<td align="center">@item.themeCost</td>
					<td align="center">@item.totalCost</td>
					<td align="center">
						@{ var precentOfSale = item.themeCost == 0 ? 0 : (item.totalCost * 100) / item.themeCost; }
						@string.Format("{0:n2}", precentOfSale.ToString())%
					</td>
				</tr>
				}
			</tbody>
		</table>

	</div>

</div>


<div class="modal fade" id="ModalPreviewPDF" style="display:none">
	<div id="divPreviewApprove">
		@Html.Action("activityPDFView", "ActivityViewer", new { actId = ViewBag.actId })
	</div>
</div>

<script>
	$(document).ready(function () {
		$('#datatable').DataTable({
			"columnDefs": [
				{ "orderable": false, "targets": 0 }
				, { "orderable": false, "targets": 1 }
				, { "orderable": false, "targets": 2 }
				, { "orderable": false, "targets": 3 }
			],
			"dom": 'lCfrtip',
			"order": [],
			"language": {
				"lengthMenu": '_MENU_ entries per page',
				"search": '<i class="fa fa-search"></i>',
				"paginate": {
					"previous": '<i class="fa fa-angle-left"></i>',
					"next": '<i class="fa fa-angle-right"></i>'
				}
			}
		});

	})
</script>