@using eActForm.BusinessLayer
@using System.Configuration;
@model eActForm.Models.Budget_Approve_Detail_Model.budgetForms

<div class="row">

    <div class="col-md-12 col-xs-12">

    </div>
    <div class="col-md-12 col-xs-12">
        <a class="btn ink-reaction btn-info fa fa-search" href="#"></a>คือ View
        <a class="btn ink-reaction btn-success fa fa-thumbs-o-up" href="#"></a>คือ Approve

        <table id="datatable" class="table table-striped table-hover">
            <thead>
                <tr style="background-color:#2B5D95;color:#ffffff;">
                    <th></th>
                    <th>สถานะ</th>
                    <th>วันที่เสนออนุมัติ</th>
                    <th>เลขกิจกรรม</th>
                    <th>ลูกค้า</th>
                    <th>ช่องทาง</th>
                    <th align="center">จำนวนเงิน</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.budgetFormLists)
                {
                    <tr class="gradeX">
                        <td>
                            @Html.ActionLink(" ", "getPdfBudget", "BudgetViewer", new { budgetApproveId = item.budgetApproveId }, new { @class = "btn ink-reaction btn-info fa fa-search", target = "_blank" })

                            @Html.ActionLink(" ", "index", "BudgetApprove", new { budgetApproveId = item.budgetApproveId, type = "ActivityBudget" }, new { @class = "btn ink-reaction btn-success fa fa-thumbs-o-up" })
                        </td>
                        <td>@item.statusName</td>
                        <td style="font-size:12.5px;">@{var date = item.documentDate == null ? "" : DocumentsAppCode.convertDateTHToShowCultureDateEN(item.documentDate, ConfigurationManager.AppSettings["formatDateUse"]);} @date </td>
                        <td>@item.activityNo</td>
                        <td>@item.cusShortName</td>
                        <td>@item.channelName</td>
                        <td align="center">@string.Format("{0:n2}", item.totalInvoiceApproveBath)</td>
                    </tr>
                }
            </tbody>
        </table>

    </div>

</div>


<div class="modal fade" id="ModalPreviewPDF" style="display:none">
    <div id="divPreviewApprove">
        @Html.Action("activityPDFView", "ActivityViewer", new { actId = ViewBag.actId })
    </div>
</div>

<script>
    $(document).ready(function () {
        $('#datatable').DataTable({
            "columnDefs": [
                { "orderable": false, "targets": 0 }
                , { "orderable": true, "targets": 1 }
                , { "orderable": true, "targets": 2 }
                , { "orderable": true, "targets": 3 }
                , { "orderable": true, "targets": 4 }
                , { "orderable": true, "targets": 5 }
                , { "orderable": true, "targets": 6 }
            ],
            "dom": 'lCfrtip',
            "order": [],
            "language": {
                "lengthMenu": '_MENU_ entries per page',
                "search": '<i class="fa fa-search"></i>',
                "paginate": {
                    "previous": '<i class="fa fa-angle-left"></i>',
                    "next": '<i class="fa fa-angle-right"></i>'
                }
            }
        });

    })
</script>