@model eActForm.Models.Budget_Activity_Model
@{
	ViewBag.Title = "";

	var last = Model.Budget_Activity_Last_Approve;

	//if (last == null)
	//{
	//	last.budgetActivityId = "";
	//	last.budgetApproveId = "";
	//}


}


<style type="text/css">

	.my-bootbox-class .modal-dialog {
		width: 400px;
		font-size: 18px;
	}
</style>

<div class="alert-link" role="alert">

</div>


<table class="table table-bordered" id="content">
	<thead class="thead-dark">
		<tr>
			<th class="align-content-center font12B" style="width:10%;"></th>
			<th class="align-content-center font12B" style="text-align:right;">จำนวนเงินที่ตั้ง</th>
			<th class="align-content-center font12B" style="text-align:center;">เลขที่ใบแจ้งหนี้</th>
			<th class="align-content-center font12B" style="text-align:right;">จำนวนเงินจ่าย</th>
			<th class="align-content-center font12B" style="text-align:right;">คงเหลือ</th>
			<th class="align-content-center font12B" style="text-align:center;">วันที่ทำรายการ</th>
			<th class="align-content-center font12B" style="text-align:center;">สถานะ</th>
			<th class="align-content-center font12B" style="text-align:center;">สถานะอนุมัติ</th>
		</tr>
	</thead>

	@*------------------------------------------------------------------------------------------------*@
	<tbody>
		@if (Model.Budget_Activity_Invoice_list.Count > 0)
		{
			var index = 0;
			foreach (var item in Model.Budget_Activity_Invoice_list)
			{
				<tr class="gradeX">
					<td style="text-align:left;">

						<a href="javascript:" class="anchorDetail btn ink-reaction btn-sm btn-info fa fa-edit" onclick="javascript:onSelectInvoice('@item.activityId','@item.activityOfEstimateId','@item.invoiceId');"></a>
						@*<a onclick="callApproveList('@(last == null ? "" : last.budgetApproveId)');"> <i class="btn ink-reaction btn-dark fa fa-eye"></i> </a>*@

		@*<a href="javascript:" onclick="return onDelete('@item.activityId','@item.activityOfEstimateId','@item.invoiceId','@item.invoiceNo');">
			<i class="btn ink-reaction btn-danger fa fa-trash-o"></i>&nbsp;
		</a>*@

						@if (item.invoiceApproveStatusId == 1) // draff
						{
							<a href="javascript:" onclick="return onDelete('@item.activityId','@item.activityOfEstimateId','@item.invoiceId','@item.invoiceNo');">
								<i class="btn ink-reaction btn-danger fa fa-trash-o"></i>&nbsp;
							</a>
						}
						else
						{
							<a href="javascript:" onclick="return onCancel('@item.activityId','@item.activityOfEstimateId','@item.invoiceId','@item.invoiceNo');">
								<i class="btn ink-reaction btn-warning fa fa-reply"></i>&nbsp;
							</a>

							@*@Html.ActionLink(" ", "getPdfBudget", "BudgetViewer", new { budgetApproveId = last.budgetApproveId }, new { @class = "btn ink-reaction btn-success fa fa-search", target = "_blank" })*@
						}

					</td>
					<td style="font-size:12.5px;text-align:right;">
						@if (item.productStandBath != null)
						{
							string result = String.Format("{0:n2}", @item.productStandBath);
							@result.ToString();
						}
					</td>
					<td style="font-size:12.5px;text-align:center;">
						@if (item.invoiceNo != null)
						{
							string result = String.Format("{0:n2}", @item.invoiceNo);
							@result.ToString();
						}
					</td>

					<td style="font-size:12.5px;text-align:right;">
						@*จำนวนเงินจ่าย*@
						@if (item.invoiceTotalBath != null)
						{
							string result = String.Format("{0:n2}", @item.invoiceTotalBath);
							@result.ToString();
						}
					</td>

					<td style="font-size:12.5px;text-align:right;">
						@*ผลต่าง-บาท*@
						@if (item.productBalanceBath != null)
						{
							string result = String.Format("{0:n2}", @item.productBalanceBath);
							@result.ToString();
						}
					</td>
					<td style="font-size:12.5px;text-align:center;">
						@item.dateInvoiceAction.Value.ToString("dd/MM/yyyy")
					</td>

					@if (item.invoiceBudgetStatusId == 1)
					{
						<td style="font-size:12.5px;text-align:center; color:firebrick;">@item.invoiceBudgetStatusNameTH</td>
					}
					else if (item.invoiceBudgetStatusId == 2)
					{
						<td style="font-size:12.5px;text-align:center; color:darkorange;">@item.invoiceBudgetStatusNameTH</td>
					}
					else
					{
						<td style="font-size:12.5px;text-align:center; color:forestgreen;">@item.invoiceBudgetStatusNameTH</td>
					}

					<td style="font-size:12.5px;text-align:center;">
						@*สถานะการอนุมัติ invoice*@
						@if (item.invoiceApproveStatusName != null)
						{
							if (item.invoiceApproveStatusId != 1)
							{
								string result = String.Format("{0:n2}", @item.invoiceApproveStatusName);
								@result.ToString();
							}

						}
					</td>
				</tr>
				index++;
			}
		}
	</tbody>
	@*------------------------------------------------------------------------------------------------*@
</table>



@if (Model.Budget_Activity_Invoice_list.Count != 0)
{
	<button type="button" class="btn btn-sm ink-reaction pull-right btn-success" onclick="javascript:onInvoicePrintPreview('@Model.Budget_Activity.act_form_id','@Model.Budget_Activity.act_companyEN');"><i class="fa fa-file-o fa-fw"></i>&nbsp;Preview</button>
}


@*<div class="modal fade" id="modalmyDocBudgetList" role="dialog" style="display:none">
	<div id="divModalmyDocBudgetList">
	</div>
</div>*@


