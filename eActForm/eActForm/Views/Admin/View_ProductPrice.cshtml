
@model eActForm.Models.TB_Act_ProductPrice_Model
@{ 
    int row = 0;
}
<style>
    .bgRed{
        background-color:pink;
    }

    .bgGreed{
        background-color:powderblue;
    }

</style>
<div class="row">
    <div class="col-md-12 col-xs-12">

    </div>
    <div class="col-md-12 col-xs-12">

        <table width="100%" id="datatable" class="table table-striped table-hover">
            <thead>
                <tr style="background-color:#2B5D95;color:#ffffff; text-align:center;">
                    <th width="80px"></th>
                    <th>Customer</th>
                    <th>ProductId</th>
                    <th>ProductName</th>
                    <th colspan="2">NormalCost</th>
                    <th colspan="2">WholeSalesPrice</th>
                    <th colspan="2">Discount1</th>
                    <th colspan="2">Discount2</th>
                    <th colspan="2">Discount3</th>
                    <th colspan="2">SaleNormal</th>
                </tr>
            </thead>
            <tbody>
                @if (Model.ProductPriceList.Any())
                {
                    foreach (var item in Model.ProductPriceList)
                    {
                        <tr class="gradeX">
                            <td>@item.status</td>
                            <td>@item.customerName</td>
                            <td>@item.productId</td>
                            <td>@item.productName</td>
                            <td class="bgRed"> @string.Format("{0:#,0.00}", @item.old_normalCost) </td>
                            <td class="bgGreed"> @string.Format("{0:#,0.00}", @item.normalCost)</td>
                            <td class="bgRed">@string.Format("{0:#,0.00}", @item.old_wholeSalesPrice) </td>
                            <td class="bgGreed">@string.Format("{0:#,0.00}", @item.wholeSalesPrice) </td>
                            <td class="bgRed">@string.Format("{0:#,0.00}", @item.old_discount1) </td>
                            <td class="bgGreed">@string.Format("{0:#,0.00}", @item.discount1)</td>
                            <td class="bgRed">@string.Format("{0:#,0.00}", @item.old_discount2)</td>
                            <td class="bgGreed">@string.Format("{0:#,0.00}", @item.discount2)</td>
                            <td class="bgRed">@string.Format("{0:#,0.00}", @item.old_discount3)</td>
                            <td class="bgGreed">@string.Format("{0:#,0.00}", @item.discount3) </td>
                            <td class="bgRed">@string.Format("{0:#,0.00}", @item.old_saleNormal)</td>
                            <td class="bgGreed">@string.Format("{0:#,0.00}", @item.saleNormal)</td>
                        </tr>

                        row++;
                    }
                    <tr>
                        Total Row : @row
                    </tr>
                }
            </tbody>

        </table>
    </div>

    <div class="row">
        <div class="col-md-12 col-md-offset-5">
            <button style="width:120px" type="button" id="BtnSubmit" class="btn btn-primary" onclick="return submitConfirm();">Confirm</button>
        </div>
    </div>
</div>


<script>
      function submitConfirm() {
      bootbox.confirm({
          message: "<p class='lead text-center'>ยืนยัน บันทึกข้อมูล!<p>",
          buttons: {
              confirm: {
                  label: 'Yes',
                  className: 'btn-success'
              },
              cancel: {
                  label: 'No',
                  className: 'btn-danger'
              }
          },
          callback: function (result) {
              if (result == true) {
                  $("#WaitDialog").show();

                  $.ajax({
                      url: '@Url.Action("ConfirmImportProductPrice", "Admin")',
                      data: {},
                      dataType: 'json',
                      type: 'POST',
                      contentType: false,
                      processData: false,
                      success: function (response) {
                          if (response.Success) {
                              doMsgSuccess('บันทึกเรียบร้อย');
                              document.getElementById("BtnSubmit").disabled = true;

                          }
                          $("#WaitDialog").hide();
                      }
                  });
              }
          }
      });
  }
</script>